<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory</title>
    <style>
        /* Basic styles for inventory */
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        #inventoryContainer {
            display: flex;
            flex-wrap: wrap; /* Allows items to wrap to the next line */
        }
        .item {
            margin: 10px;
            border: 1px solid #ccc;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
        }
        img {
            width: 100px; /* Adjust size as needed */
            height: auto;
            border-radius: 10px; /* Optional: for rounded images */
        }
    </style>
</head>
<body>
    <h1>Your Inventory</h1>
    <div id="inventoryContainer"></div> <!-- Container for displaying item images -->

    <script type="module">
        // Import Firebase functions
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-app.js";
        import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-database.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-auth.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDQcJNa_j_PC3-K5er4ms0WvVXQS_CEcuE",
            authDomain: "algebras4-44f23.firebaseapp.com",
            databaseURL: "https://algebras4-44f23-default-rtdb.firebaseio.com",
            projectId: "algebras4-44f23",
            storageBucket: "algebras4-44f23.appspot.com",
            messagingSenderId: "512062724744",
            appId: "1:512062724744:web:653e3c7a504fb7255fdd3d",
            measurementId: "G-4R378XMPSW"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const auth = getAuth(app);

        let currentUserId = null;

        // Check user authentication state
        onAuthStateChanged(auth, (user) => {
            if (user) {
                currentUserId = user.uid;
                displayInventory(); // Display the inventory if the user is logged in
            } else {
                alert("Please sign in to access your inventory.");
                currentUserId = null;
            }
        });

        // Function to display purchased items in the inventory
        function displayInventory() {
            const inventoryContainer = document.getElementById("inventoryContainer");
            const purchasedItems = JSON.parse(localStorage.getItem('purchasedItems')) || []; // Get purchased items from local storage
            
            // Clear existing items in the container
            inventoryContainer.innerHTML = '';

            // Loop through purchased items and create item elements
            purchasedItems.forEach((itemImage) => {
                const itemDiv = document.createElement("div");
                itemDiv.classList.add("item");
                
                const itemImg = document.createElement("img");
                itemImg.src = itemImage; // Set the image source
                itemImg.alt = "Purchased Item"; // Alt text for the image
                
                itemDiv.appendChild(itemImg); // Add image to item div
                inventoryContainer.appendChild(itemDiv); // Add item div to inventory container
            });

            // If no items are purchased, show a message
            if (purchasedItems.length === 0) {
                inventoryContainer.innerHTML = '<p>No items in your inventory.</p>';
            }
        }
    </script>
</body>
</html>
